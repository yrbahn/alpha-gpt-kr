# ğŸš€ ë‚´ì¼ ì•„ì¹¨ ì‹¤í–‰ ê°€ì´ë“œ

## ì¤€ë¹„ ì™„ë£Œ! âœ…

DB ê¸°ë°˜ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œì´ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

### ì‹œìŠ¤í…œ êµ¬ì¡°

```
ì˜¤ëŠ˜ ì €ë… (ìˆ˜ë™ ë˜ëŠ” ìë™)
    â†“
ì•ŒíŒŒ ê³„ì‚° â†’ DB ì €ì¥
    â†“
ë‚´ì¼ ì•„ì¹¨ 9ì‹œ ì „
    â†“
DBì—ì„œ ì½ê¸° â†’ ë§¤ìˆ˜ ì‹¤í–‰
    â†“
ì €ë…ì— ëŒ€ì‹œë³´ë“œ í™•ì¸
```

---

## ì˜¤ëŠ˜ ì €ë… ì‹¤í–‰ (ì•ŒíŒŒ ê³„ì‚°)

```bash
cd /Users/yrbahn/.openclaw/workspace/alpha-gpt-kr
python3 calculate_and_save_alpha.py
```

**ì˜ˆìƒ ê²°ê³¼:**
- ì‹œê°€ì´ì•¡ ìƒìœ„ 500ê°œ ì¢…ëª© ë¶„ì„
- `ops.ts_delta(close, 26)` ì•ŒíŒŒ ê³„ì‚°
- DBì— 477ê°œ ì¢…ëª© ì €ì¥
- ìƒìœ„ 10ê°œ ì¶œë ¥

**ì†Œìš” ì‹œê°„:** ì•½ 2-3ë¶„

---

## ë‚´ì¼ ì•„ì¹¨ ì‹¤í–‰ (ë§¤ìˆ˜)

### 1ë‹¨ê³„: DRY RUNìœ¼ë¡œ í™•ì¸ (8:50)

```bash
cd /Users/yrbahn/.openclaw/workspace/alpha-gpt-kr
python3 trade_from_db.py --top-n 15 --amount 5000000 --dry-run
```

**í™•ì¸ ì‚¬í•­:**
- [ ] ìƒìœ„ 15ê°œ ì¢…ëª©ì´ í•©ë¦¬ì ì¸ê°€?
- [ ] ê° ì¢…ëª©ë‹¹ íˆ¬ìì•¡ì´ ì ì ˆí•œê°€?
- [ ] í˜„ì¬ê°€ê°€ ì •ìƒì ì¸ê°€?

### 2ë‹¨ê³„: ì‹¤ì œ ë§¤ìˆ˜ (8:55~9:00)

```bash
python3 trade_from_db.py --top-n 15 --amount 5000000
```

**ì£¼ì˜:**
- `yes` ì…ë ¥ í›„ ì‹¤í–‰ë¨
- ì¢…ëª©ë‹¹ ì•½ 333,333ì›ì”© ê· ë“± ë¶„í• 
- ë§¤ìˆ˜ ì™„ë£Œ í›„ DBì— ê¸°ë¡ë¨

---

## ì €ë… í™•ì¸ (ëŒ€ì‹œë³´ë“œ)

### ëŒ€ì‹œë³´ë“œ ìƒì„±

```bash
python3 generate_dashboard.py
```

### ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°

```bash
open dashboard.html
```

**ëŒ€ì‹œë³´ë“œ ë‚´ìš©:**
- ğŸ“Š í˜„ì¬ ì•ŒíŒŒ ê³µì‹
- ğŸ’° ê³„ì¢Œ í˜„í™© (ì”ê³ , ìˆ˜ìµë¥ )
- ğŸ“ˆ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„¸ (ì¢…ëª©ë³„ ì†ìµ)
- ğŸ“‰ ê³„ì¢Œ ê°€ì¹˜ ì¶”ì´ ì°¨íŠ¸
- ğŸ”” ë§¤ë§¤ ì‹ í˜¸ ë‚´ì—­

---

## ì˜µì…˜ ì¡°ì •

### ì¢…ëª© ìˆ˜ ë³€ê²½

```bash
# 10ê°œ ì¢…ëª©ë§Œ
python3 trade_from_db.py --top-n 10 --amount 5000000

# 20ê°œ ì¢…ëª©
python3 trade_from_db.py --top-n 20 --amount 5000000
```

### íˆ¬ì ê¸ˆì•¡ ë³€ê²½

```bash
# 300ë§Œì›
python3 trade_from_db.py --top-n 15 --amount 3000000

# 1000ë§Œì›
python3 trade_from_db.py --top-n 15 --amount 10000000
```

---

## ìë™í™” ì„¤ì • (ì„ íƒì‚¬í•­)

crontabì— ì¶”ê°€:

```bash
crontab -e
```

```cron
# í‰ì¼ ì˜¤í›„ 5ì‹œ: ì•ŒíŒŒ ê³„ì‚°
0 17 * * 1-5 cd /Users/yrbahn/.openclaw/workspace/alpha-gpt-kr && /usr/local/bin/python3 calculate_and_save_alpha.py >> logs/alpha_calc.log 2>&1

# í‰ì¼ ì˜¤ì „ 8ì‹œ 50ë¶„: ë§¤ìˆ˜ ì‹œë®¬ë ˆì´ì…˜ (í™•ì¸ìš©)
50 8 * * 1-5 cd /Users/yrbahn/.openclaw/workspace/alpha-gpt-kr && /usr/local/bin/python3 trade_from_db.py --dry-run >> logs/trade_check.log 2>&1

# í‰ì¼ ì €ë… 6ì‹œ: ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
0 18 * * 1-5 cd /Users/yrbahn/.openclaw/workspace/alpha-gpt-kr && /usr/local/bin/python3 generate_dashboard.py >> logs/dashboard.log 2>&1
```

**ì£¼ì˜:** ìë™ ë§¤ìˆ˜ëŠ” ê¶Œì¥í•˜ì§€ ì•ŠìŒ. ìˆ˜ë™ í™•ì¸ í›„ ì‹¤í–‰í•˜ì„¸ìš”.

---

## DB ì§ì ‘ í™•ì¸

### ìµœì‹  ì•ŒíŒŒ ìŠ¤ì½”ì–´

```bash
psql -h 192.168.0.248 -U yrbahn -d marketsense -c "SELECT * FROM latest_alpha_scores LIMIT 10;"
```

### ë¯¸ì‹¤í–‰ ì‹ í˜¸

```bash
psql -h 192.168.0.248 -U yrbahn -d marketsense -c "SELECT * FROM pending_signals;"
```

---

## ë¬¸ì œ ë°œìƒ ì‹œ

### "No alpha scores found"

```bash
# ì•ŒíŒŒ ë‹¤ì‹œ ê³„ì‚°
python3 calculate_and_save_alpha.py
```

### "Database connection failed"

```bash
# .env í™•ì¸
cat .env | grep DB_

# PostgreSQL í…ŒìŠ¤íŠ¸
python3 test_postgres.py
```

### "KIS API error"

```bash
# ì”ê³  í™•ì¸
python3 check_balance.py

# í† í° ì¬ìƒì„±
rm -rf ~/.kis_tokens/
```

---

## í•µì‹¬ íŒŒì¼

- **`calculate_and_save_alpha.py`**: ì•ŒíŒŒ ê³„ì‚° ë° DB ì €ì¥
- **`trade_from_db.py`**: DBì—ì„œ ì½ì–´ ë§¤ìˆ˜
- **`generate_dashboard.py`**: ëŒ€ì‹œë³´ë“œ ìƒì„±
- **`db_schema.sql`**: DB êµ¬ì¡°
- **`README_DB_TRADING.md`**: ìƒì„¸ ê°€ì´ë“œ

---

## í˜„ì¬ ì„¤ì •

- **ì•ŒíŒŒ:** `ops.ts_delta(close, 26)` (26ì¼ ëª¨ë©˜í…€)
- **ì„±ê³¼:** IC 0.0045, Sharpe 0.57, Return +21% (2ë…„ ë°±í…ŒìŠ¤íŠ¸)
- **ê³„ì¢Œ:** 44009082-01 (KIS ì‹¤ê³„ì¢Œ)
- **DB:** marketsense @ 192.168.0.248

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì˜¤ëŠ˜ ì €ë…
- [ ] `python3 calculate_and_save_alpha.py` ì‹¤í–‰
- [ ] ìƒìœ„ 10ê°œ ì¢…ëª© í™•ì¸
- [ ] DB ì €ì¥ ì™„ë£Œ í™•ì¸

### ë‚´ì¼ ì•„ì¹¨
- [ ] `python3 trade_from_db.py --dry-run` ì‹œë®¬ë ˆì´ì…˜
- [ ] ì¢…ëª©/ê¸ˆì•¡ í™•ì¸
- [ ] `python3 trade_from_db.py` ì‹¤ì œ ë§¤ìˆ˜
- [ ] ë§¤ìˆ˜ ì™„ë£Œ í™•ì¸

### ë‚´ì¼ ì €ë…
- [ ] `python3 generate_dashboard.py` ëŒ€ì‹œë³´ë“œ ìƒì„±
- [ ] í¬íŠ¸í´ë¦¬ì˜¤ í™•ì¸
- [ ] ìˆ˜ìµë¥  í™•ì¸

---

**ì¤€ë¹„ ì™„ë£Œ!** ğŸ‰

ëª¨ë“  ì‹œìŠ¤í…œì´ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤. ìœ„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
