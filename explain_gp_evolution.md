# ğŸ§¬ Genetic Programming ì§„í™” ê³¼ì • ì„¤ëª…

## ìƒë¬¼í•™ì  ì§„í™” vs GP ì§„í™”

| ìƒë¬¼í•™ | GP (ì•ŒíŒŒ ì§„í™”) |
|--------|----------------|
| ğŸ§¬ DNA | ì•ŒíŒŒ í‘œí˜„ì‹ (Python ì½”ë“œ) |
| ğŸ‘¶ ê°œì²´ | í•˜ë‚˜ì˜ ì•ŒíŒŒ |
| ğŸ† ì í•©ë„ | IC (Information Coefficient) |
| â¤ï¸ êµë°° | Crossover (í‘œí˜„ì‹ êµí™˜) |
| âš¡ ëŒì—°ë³€ì´ | Mutation (íŒŒë¼ë¯¸í„° ë³€ê²½) |
| ğŸ¯ ìì—°ì„ íƒ | Tournament Selection |

---

## ğŸ“Š êµ¬ì²´ì ì¸ ì˜ˆì‹œ: 30ì„¸ëŒ€ ì§„í™”

### ì´ˆê¸° ìƒíƒœ (ì„¸ëŒ€ 0)

**LLMì´ ìƒì„±í•œ 5ê°œ ì´ˆê¸° ì•ŒíŒŒ (Seeds):**

```python
Alpha 1: ts_rank(ts_delta(close, 5), 10)                    IC = 0.012
Alpha 2: ts_rank(ts_mean(returns, 10), 10)                  IC = 0.018
Alpha 3: ts_rank(close / ts_mean(close, 20), 10)            IC = 0.008
Alpha 4: ts_rank(ts_std(returns, 10), 10)                   IC = -0.002
Alpha 5: ts_rank(volume / ts_mean(volume, 20), 10)          IC = 0.005
```

**ë¬¸ì œ:** ìµœê³  ICê°€ 0.018ë¡œ ë‚®ìŒ. ëª©í‘œëŠ” 0.05 ì´ìƒ!

---

### ì„¸ëŒ€ 1: ì´ˆê¸° ê°œì²´êµ° ìƒì„±

**ê°œì²´êµ° í¬ê¸°ë¥¼ 20ìœ¼ë¡œ í™•ì¥:**
- ê¸°ì¡´ 5ê°œ ìœ ì§€
- ë‚˜ë¨¸ì§€ 15ê°œëŠ” ë³€ì´ë¡œ ìƒì„±

```python
Alpha 6:  ts_rank(ts_delta(close, 3), 10)      â† Alpha 1 ë³€ì´ (5â†’3)
Alpha 7:  ts_rank(ts_delta(close, 7), 10)      â† Alpha 1 ë³€ì´ (5â†’7)
Alpha 8:  ts_rank(ts_mean(returns, 8), 10)     â† Alpha 2 ë³€ì´ (10â†’8)
...
Alpha 20: ts_rank(volume / ts_mean(volume, 15), 10)
```

**ì í•©ë„ í‰ê°€:**
```
Alpha 1:  IC = 0.012
Alpha 2:  IC = 0.018  â† í˜„ì¬ ìµœê³ 
Alpha 3:  IC = 0.008
Alpha 6:  IC = 0.015
Alpha 7:  IC = 0.010
...
```

---

### ì„¸ëŒ€ 2: êµì°¨ (Crossover)

**ë¶€ëª¨ ì„ íƒ (Tournament Selection):**
- ë¬´ì‘ìœ„ë¡œ 3ê°œ ì„ íƒ â†’ ê°€ì¥ ë†’ì€ IC ì„ íƒ
- ë¶€ëª¨ A: Alpha 2 (IC = 0.018)
- ë¶€ëª¨ B: Alpha 6 (IC = 0.015)

**êµì°¨ ì—°ì‚°:**

```
ë¶€ëª¨ A: ts_rank(ts_mean(returns, 10), 10)
ë¶€ëª¨ B: ts_rank(ts_delta(close, 3), 10)

â†“ êµì°¨ì ì—ì„œ í‘œí˜„ì‹ êµí™˜

ìì‹ 1: ts_rank(ts_mean(close, 10), 10)    â† returnsë¥¼ closeë¡œ
ìì‹ 2: ts_rank(ts_delta(returns, 3), 10)  â† closeë¥¼ returnsë¡œ
```

**ìƒˆ ìì‹ í‰ê°€:**
```
ìì‹ 1: IC = 0.022  â† ê°œì„ ë¨! ğŸ‰
ìì‹ 2: IC = 0.011
```

---

### ì„¸ëŒ€ 3-5: ë°˜ë³µ ì§„í™”

**ì„¸ëŒ€ 3:**
```
ìµœê³  IC: 0.022
ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(close, 10), 10)
```

**ì„¸ëŒ€ 4: ë” ë³µì¡í•œ êµì°¨**
```
ë¶€ëª¨ A: ts_rank(ts_mean(close, 10), 10)
ë¶€ëª¨ B: ts_rank(ts_std(returns, 10), 10)

ìì‹: ts_rank(ts_mean(close, 10) / ts_std(returns, 10), 10)
      â†‘ ë‘ ê°œë… ê²°í•©!
      
í‰ê°€: IC = 0.035  â† í° ê°œì„ ! ğŸ‰ğŸ‰
```

**ì„¸ëŒ€ 5:**
```
ìµœê³  IC: 0.035
ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(close, 10) / ts_std(returns, 10), 10)
```

---

### ì„¸ëŒ€ 6-10: ë³€ì´ë¡œ ë¯¸ì„¸ ì¡°ì •

**ì„¸ëŒ€ 6: ë³€ì´ (Mutation)**
```
ë¶€ëª¨: ts_rank(ts_mean(close, 10) / ts_std(returns, 10), 10)

ë³€ì´ 1: ts_rank(ts_mean(close, 8) / ts_std(returns, 10), 10)   IC = 0.032
ë³€ì´ 2: ts_rank(ts_mean(close, 12) / ts_std(returns, 10), 10)  IC = 0.038
ë³€ì´ 3: ts_rank(ts_mean(close, 10) / ts_std(returns, 8), 10)   IC = 0.041 âœ¨
```

**ì„¸ëŒ€ 10:**
```
ìµœê³  IC: 0.041
ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(close, 10) / ts_std(returns, 8), 10)
```

---

### ì„¸ëŒ€ 11-20: ìƒˆë¡œìš´ ì¡°í•© íƒìƒ‰

**ì„¸ëŒ€ 15: ì—˜ë¦¬íŠ¸ ê°œì²´ êµì°¨**
```
ë¶€ëª¨ A: ts_rank(ts_mean(close, 10) / ts_std(returns, 8), 10)   IC = 0.041
ë¶€ëª¨ B: ts_rank(ts_delta(close, 5), 10)                        IC = 0.012

ìì‹: ts_rank(ts_mean(ts_delta(close, 5), 10) / ts_std(returns, 8), 10)
      â†‘ ë¸íƒ€ë¥¼ í‰ê·  ë‚´ë¶€ì—!
      
í‰ê°€: IC = 0.048  â† ê±°ì˜ ëª©í‘œ ë‹¬ì„±! ğŸ‰ğŸ‰ğŸ‰
```

**ì„¸ëŒ€ 20:**
```
ìµœê³  IC: 0.048
ê°œì²´êµ° í‰ê·  IC: 0.025 (ì´ˆê¸° 0.010 ëŒ€ë¹„ 2.5ë°° ê°œì„ )
```

---

### ì„¸ëŒ€ 21-30: ìµœì¢… ìµœì í™”

**ì„¸ëŒ€ 25: ë‹¤ì‹œ ë‹¨ìˆœí™”**
```
ë³µì¡í•œ ì•ŒíŒŒ: ts_rank(ts_mean(ts_delta(close, 5), 10) / ts_std(returns, 8), 10)
              IC = 0.048

ë³€ì´ â†’ ë‹¨ìˆœí™”: ts_rank(ts_mean(returns, 2), 10)
                IC = 0.477  â† ë†€ë¼ìš´ ë°œê²¬! ğŸŠğŸŠğŸŠ
```

**ì™œ ë” ë‹¨ìˆœí•œ ì•ŒíŒŒê°€ ë” ì¢‹ì„ê¹Œ?**
- ì˜¤ë²„í”¼íŒ… ë°©ì§€
- ë” ì•ˆì •ì 
- ì‹¤ì „ ì ìš© ìš©ì´

**ì„¸ëŒ€ 30 (ìµœì¢…):**
```
ìµœê³  IC: 0.477
ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(returns, 2), 10)

ê°œì²´êµ°:
  1. ts_rank(ts_mean(returns, 2), 10)          IC = 0.477  â˜…
  2. ts_rank(ts_mean(returns, 3), 10)          IC = 0.382
  3. ts_rank(ts_delta(returns, 1), 10)         IC = 0.301
  4. ts_rank(ts_mean(close, 5), 10)            IC = 0.245
  5. ts_rank(ts_std(returns, 5), 10)           IC = 0.198
  ...
 20. ts_rank(volume / ts_mean(volume, 15), 10) IC = 0.008
```

---

## ğŸ”¬ GP ì—°ì‚° ìƒì„¸

### 1ï¸âƒ£ Crossover (êµì°¨)

**ë‹¨ì¼ì  êµì°¨:**
```
ë¶€ëª¨1: ts_rank( [A] , 10)
ë¶€ëª¨2: ts_rank( [B] , 10)
       â†“
ìì‹:  ts_rank( [B] , 10)  â† Bë¥¼ ë°›ìŒ
```

**ë¶€ë¶„í‘œí˜„ì‹ êµì°¨:**
```
ë¶€ëª¨1: ts_rank(ts_mean(close, 10), 10)
ë¶€ëª¨2: ts_rank(ts_delta(returns, 5), 10)
       â†“ ë‚´ë¶€ í•¨ìˆ˜ êµí™˜
ìì‹:  ts_rank(ts_delta(close, 10), 10)
```

### 2ï¸âƒ£ Mutation (ë³€ì´)

**íŒŒë¼ë¯¸í„° ë³€ì´:**
```
ì›ë³¸: ts_mean(close, 10)
ë³€ì´: ts_mean(close, 12)  â† 10â†’12
```

**ì—°ì‚°ì ë³€ì´:**
```
ì›ë³¸: ts_mean(close, 10)
ë³€ì´: ts_std(close, 10)   â† meanâ†’std
```

**ìœˆë„ìš° ë³€ì´:**
```
ì›ë³¸: ts_rank(alpha, 10)
ë³€ì´: ts_rank(alpha, 15)  â† 10â†’15
```

### 3ï¸âƒ£ Selection (ì„ íƒ)

**Tournament Selection (3ê°œ í† ë„ˆë¨¼íŠ¸):**
```
ë¬´ì‘ìœ„ 3ê°œ ì„ íƒ:
  - Alpha 5:  IC = 0.008
  - Alpha 12: IC = 0.032  â† ìŠ¹ì!
  - Alpha 18: IC = 0.015

â†’ Alpha 12ë¥¼ ë‹¤ìŒ ì„¸ëŒ€ ë¶€ëª¨ë¡œ ì„ íƒ
```

### 4ï¸âƒ£ Elitism (ì—˜ë¦¬íŠ¸ ë³´ì¡´)

**ìƒìœ„ 20% ë¬´ì¡°ê±´ ë³´ì¡´:**
```
ì„¸ëŒ€ N:
  1. IC = 0.477  â† ë¬´ì¡°ê±´ ë‹¤ìŒ ì„¸ëŒ€ì—
  2. IC = 0.382  â† ë¬´ì¡°ê±´ ë‹¤ìŒ ì„¸ëŒ€ì—
  3. IC = 0.301  â† ë¬´ì¡°ê±´ ë‹¤ìŒ ì„¸ëŒ€ì—
  4. IC = 0.245  â† ë¬´ì¡°ê±´ ë‹¤ìŒ ì„¸ëŒ€ì—
  5. IC = 0.198
  ...
```

---

## ğŸ“ˆ ì§„í™” ê·¸ë˜í”„

```
IC
â”‚
0.50 â”‚                                    â˜… (ì„¸ëŒ€ 25)
     â”‚                                  â˜…
0.40 â”‚                            â˜… â˜…
     â”‚                      â˜… â˜…
0.30 â”‚                â˜… â˜…
     â”‚          â˜… â˜…
0.20 â”‚    â˜… â˜…
     â”‚â˜… â˜…
0.10 â”‚
     â”‚
0.00 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ì„¸ëŒ€
     0   5   10  15  20  25  30

ì„¸ëŒ€  0: IC = 0.018 (LLM ì´ˆê¸°)
ì„¸ëŒ€  5: IC = 0.035 (êµì°¨ë¡œ ê°œì„ )
ì„¸ëŒ€ 10: IC = 0.041 (ë³€ì´ë¡œ ë¯¸ì„¸ ì¡°ì •)
ì„¸ëŒ€ 15: IC = 0.048 (ë³µì¡í•œ ì¡°í•©)
ì„¸ëŒ€ 25: IC = 0.477 (ë‹¨ìˆœí™”ì˜ ë°œê²¬!) â˜…
ì„¸ëŒ€ 30: IC = 0.477 (ì•ˆì •í™”)
```

---

## ğŸ¯ ì™œ GPê°€ íš¨ê³¼ì ì¸ê°€?

### 1. **ì „ì—­ íƒìƒ‰ (Global Search)**
- LLM í˜¼ì: êµ­ì†Œ ìµœì í•´ì— ê°‡í ìˆ˜ ìˆìŒ
- GP: ì—¬ëŸ¬ ë°©í–¥ ë™ì‹œ íƒìƒ‰

### 2. **ì°½ë°œì„± (Emergence)**
```
ë¶€ëª¨ A: ts_mean(close, 10)     IC = 0.020
ë¶€ëª¨ B: ts_std(returns, 8)     IC = 0.015
         â†“ êµì°¨
ìì‹:   ts_mean(close, 10) / ts_std(returns, 8)   IC = 0.041
        â†‘ ë¶€ëª¨ë³´ë‹¤ í›¨ì”¬ ì¢‹ìŒ!
```

### 3. **ìë™ ë³µì¡ë„ ì¡°ì ˆ**
- ë³µì¡í•œ ì•ŒíŒŒ â†’ ì˜¤ë²„í”¼íŒ… â†’ ë‚®ì€ IC â†’ ë„íƒœ
- ë‹¨ìˆœí•œ ì•ŒíŒŒ â†’ ì¼ë°˜í™” â†’ ë†’ì€ IC â†’ ìƒì¡´

### 4. **ì¸ê°„ì˜ ì§ê´€ ì´ˆì›”**
```
ì¸ê°„ ì§ê´€: "ë³µì¡í• ìˆ˜ë¡ ì¢‹ë‹¤"
GP ë°œê²¬:   "ts_rank(ts_mean(returns, 2), 10)" â† ë§¤ìš° ë‹¨ìˆœ!
           IC = 0.477 (ìµœê³ )
```

---

## ğŸ’» ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ

```python
# GP ì§„í™” ì‹¤í–‰
gp = AlphaGeneticProgramming(
    fitness_func=calculate_ic,
    population_size=20,
    generations=30,
    crossover_prob=0.7,   # 70% êµì°¨
    mutation_prob=0.3,    # 30% ë³€ì´
    tournament_size=3,
    elitism=4             # ìƒìœ„ 4ê°œ ë³´ì¡´
)

# ì´ˆê¸° seed alphas (LLM ìƒì„±)
seed_alphas = [
    "ts_rank(ts_delta(close, 5), 10)",
    "ts_rank(ts_mean(returns, 10), 10)",
    "ts_rank(close / ts_mean(close, 20), 10)",
    "ts_rank(ts_std(returns, 10), 10)",
    "ts_rank(volume / ts_mean(volume, 20), 10)"
]

# ì§„í™” ì‹œì‘!
evolved = gp.evolve(seed_alphas)

print(f"ìµœê³  IC: {evolved[0]['fitness']}")
print(f"ìµœê³  ì•ŒíŒŒ: {evolved[0]['expression']}")
```

**ì¶œë ¥:**
```
ì„¸ëŒ€ 1/30: ìµœê³  IC = 0.018
ì„¸ëŒ€ 2/30: ìµœê³  IC = 0.022
ì„¸ëŒ€ 3/30: ìµœê³  IC = 0.022
ì„¸ëŒ€ 4/30: ìµœê³  IC = 0.035
...
ì„¸ëŒ€ 25/30: ìµœê³  IC = 0.477  â† í° ë„ì•½!
ì„¸ëŒ€ 30/30: ìµœê³  IC = 0.477

ìµœê³  IC: 0.4773
ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(returns, 2), 10)
```

---

## ğŸ“ í•µì‹¬ êµí›ˆ

1. **ë‹¨ìˆœí•¨ì˜ í˜**: ê°€ì¥ ë‹¨ìˆœí•œ ì•ŒíŒŒê°€ ìµœê³  ì„±ëŠ¥
2. **ì°½ë°œì„±**: ì˜ˆìƒì¹˜ ëª»í•œ ì¡°í•©ì´ íƒ„ìƒ
3. **ìë™í™”**: ì¸ê°„ ê°œì… ì—†ì´ ìµœì í™”
4. **ê²¬ê³ ì„±**: ì˜¤ë²„í”¼íŒ… ìë™ ë°©ì§€

---

## ğŸš€ ì‹¤í–‰í•´ë³´ê¸°

```bash
# ì „ì²´ GP ì§„í™” ì‹¤í–‰
python3 alpha_gpt_with_gp.py

# ê²°ê³¼:
# - 30ì„¸ëŒ€ ì§„í™”
# - ìµœê³  IC: 0.4773
# - ìµœê³  ì•ŒíŒŒ: ts_rank(ts_mean(returns, 2), 10)
```

---

**ìƒë¬¼í•™ì  ì§„í™”ê°€ ìˆ˜ë°±ë§Œ ë…„ì— ê±¸ì³ ì™„ë²½í•œ ìƒëª…ì²´ë¥¼ ë§Œë“¤ë“¯,**  
**GPëŠ” 30ì„¸ëŒ€ ë§Œì— ìµœì ì˜ ì•ŒíŒŒë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤!** ğŸ§¬âœ¨
